(window.webpackJsonp=window.webpackJsonp||[]).push([[57,21,23,26],{670:function(e,t,n){"use strict";n.r(t);var o=n(638),r=n(230),c=n(101),l=n(651),d=n(639),m=n(225),f={props:{method:{type:Function,default:null},open:{required:!0},message:{type:String}},watch:{open:function(e){e?document.addEventListener("keydown",this.handleKeydown):document.removeEventListener("keydown",this.handleKeydown)}},data:function(){return{}},methods:{confirm:function(){null===this.method||this.method(),this.$emit("update:complete",!1)},handleKeydown:function(e){"Escape"===e.key&&this.confirm()}}},h=n(64),component=Object(h.a)(f,(function(){var e=this,t=e._self._c;return t(l.a,{attrs:{persistent:"","retain-focus":!1,"max-width":"300","max-height":"300","content-class":"rounded-xl"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.confirm.apply(null,arguments)}},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(r.a,[t(c.d,{staticClass:"d-flex align-center justify-center text-h6"},[t(m.a,{staticClass:"mr-3",attrs:{color:"#24b224",size:"40"}},[e._v("mdi-check-circle")]),e._v("\n      สำเร็จ\n    ")],1),e._v(" "),t(d.a,{staticClass:"mb-3"}),e._v(" "),t(c.c,{staticClass:"text-center"},[e._v("\n      "+e._s(e.message)+"\n    ")]),e._v(" "),t(c.a,{staticClass:"justify-center"},[t(o.a,{staticClass:"rounded-xl font-weight-medium mt-0",attrs:{color:"#24b224"},on:{click:e.confirm}},[e._v("\n        ตกลง\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},676:function(e,t,n){"use strict";n.r(t);var o=n(638),r=n(230),c=n(101),l=n(651),d=n(639),m=n(225),f={props:{method:{type:Function,default:null},open:{required:!0},message:{type:String}},watch:{open:function(e){e?document.addEventListener("keydown",this.handleKeydown):document.removeEventListener("keydown",this.handleKeydown)}},data:function(){return{}},methods:{confirm:function(){null===this.method||this.method(),this.$emit("update:warning",!1)},handleKeydown:function(e){"Enter"===e.key&&this.confirm()}}},h=n(64),component=Object(h.a)(f,(function(){var e=this,t=e._self._c;return t(l.a,{attrs:{persistent:"","retain-focus":!1,"max-width":"350","max-height":"300","content-class":"rounded-xl"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirm.apply(null,arguments)}},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(r.a,[t(c.d,{staticClass:"d-flex align-center justify-center text-h6"},[t(m.a,{staticClass:"mr-3",attrs:{size:"40",color:"#e50211"}},[e._v("mdi-account-alert")]),e._v("\n      คำเตือน\n    ")],1),e._v(" "),t(d.a,{staticClass:"mb-3"}),e._v(" "),t(c.c,{staticClass:"text-center"},[e._v("\n      "+e._s(e.message)+"\n    ")]),e._v(" "),t(c.a,{staticClass:"justify-center"},[t(o.a,{staticClass:"rounded-xl font-weight-medium mt-0",attrs:{color:"#24b224"},on:{click:e.confirm}},[e._v("\n        ตกลง\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},677:function(e,t,n){"use strict";n.r(t);var o=n(638),r=n(230),c=n(101),l=n(651),d=n(639),m=n(225),f={props:{method:{type:Function,default:null},open:{required:!0},message:{type:String}},watch:{open:function(e){e?document.addEventListener("keydown",this.handleKeydown):document.removeEventListener("keydown",this.handleKeydown)}},data:function(){return{}},methods:{confirm:function(){null===this.method||this.method(),this.$emit("update:error",!1)},handleKeydown:function(e){"Escape"===e.key&&this.confirm()}}},h=n(64),component=Object(h.a)(f,(function(){var e=this,t=e._self._c;return t(l.a,{attrs:{persistent:"","retain-focus":!1,"max-width":"300","max-height":"300","content-class":"rounded-xl"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.confirm.apply(null,arguments)}},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(r.a,[t(c.d,{staticClass:"d-flex align-center justify-center text-h6"},[t(m.a,{staticClass:"mr-3",attrs:{size:"40",color:"#e50211"}},[e._v("mdi-alert")]),e._v("\n      เกิดข้อผิดพลาด\n    ")],1),e._v(" "),t(d.a,{staticClass:"mb-3"}),e._v(" "),t(c.c,{staticClass:"text-center"},[e._v("\n      "+e._s(e.message)+"\n    ")]),e._v(" "),t(c.a,{staticClass:"justify-center"},[t(o.a,{staticClass:"rounded-xl font-weight-medium mt-0",attrs:{color:"#24b224"},on:{click:e.confirm}},[e._v("\n        ตกลง\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},770:function(e,t,n){var content=n(822);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(22).default)("710524aa",content,!0,{sourceMap:!1})},821:function(e,t,n){"use strict";n(770)},822:function(e,t,n){var o=n(21)((function(i){return i[1]}));o.push([e.i,".login-container[data-v-9e0507a6]{align-items:center;display:flex;height:60vh;justify-content:center}.v-card[data-v-9e0507a6]{margin:auto;max-height:600px;max-width:400px}.forgot-password-text[data-v-9e0507a6]{color:#bf2b2b;cursor:pointer;font-size:.85rem;text-align:left;-webkit-text-decoration:none;text-decoration:none}.small-text-field .v-input__control .v-input__slot[data-v-9e0507a6]{font-size:.75rem}.small-text-field .v-text-field__slot[data-v-9e0507a6]{padding:8px}",""]),o.locals={},e.exports=o},922:function(e,t,n){"use strict";n.r(t);var o=n(638),r=n(230),c=n(101),l=n(682),d=n(652),m=n(681),f=n(703),h=n(2),v=(n(32),n(92),n(6),n(43),n(34),n(1)),y=n.n(v);y.a.locale("th");var w={layout:"blank",mounted:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkRank();case 2:return t.next=4,e.fetchEmployeeData();case 4:case"end":return t.stop()}}),t)})))()},watch:{open:function(e){e?document.addEventListener("keydown",this.handleKeydown):document.removeEventListener("keydown",this.handleKeydown)}},data:function(){return{modal:{complete:{open:!1,message:"เข้าสู่ระบบสำเร็จ"},error:{open:!1,message:"อีเมลหรือรหัสผ่านไม่ถูกต้อง"},warning:{open:!1,message:"ผู้ใช้นี้ยังไม่ได้รับการอนุมัติ"}},valid:!1,show1:!1,show2:!1,employees:[],form:{email:"",password:""}}},methods:{fetchEmployeeData:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("api/employee/getEmployees");case 2:e.employees=t.sent;case 3:case"end":return t.stop()}}),t)})))()},checkRank:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$auth.loggedIn){t.next=12;break}if(n=e.$auth.user.status.toString(),o=e.$auth.user.ranks_id.toString(),"2"!==n){t.next=9;break}return e.$router.push("/"),t.next=7,e.$auth.logout();case 7:t.next=10;break;case 9:"1"===o||"2"===o||"3"===o?e.$router.push("/app/home"):e.$router.push("/auth");case 10:t.next=13;break;case 12:e.$router.push("/auth");case 13:case"end":return t.stop()}}),t)})))()},login:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$auth.loginWith("local",{data:{email:e.form.email,password:e.form.password}});case 3:"2"!==e.$auth.user.status.toString()&&e.recordLog(),e.modal.complete.open=!0,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.modal.error.open=!0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},forgotPassword:function(){this.$router.push("/auth/forgot_password")},handleKeydown:function(e){"Enter"===e.key&&this.confirm()},recordLog:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){var n,o,r,c,l,d,m,f,data,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$auth.user.no,o=e.employees.find((function(e){return e.no===n})),r=o?o.fname:"Unknown",c=o?o.lname:"Unknown",l=o?o.picture:"Unknown",d="Unknown",m="Unknown",t.prev=7,t.next=10,fetch("https://ipinfo.io/json?token=a29d27593626a2");case 10:return f=t.sent,t.next=13,f.json();case 13:data=t.sent,d="".concat(data.city,", ").concat(data.region,", ").concat(data.country),m=data.ip,t.next=20;break;case 18:t.prev=18,t.t0=t.catch(7);case 20:h={emp_name:r+" "+c,emp_email:e.$auth.user.email,picture:l,type:4,action:"เข้าสู่ระบบ",detail:"ที่อยู่ : ".concat(d,"\nไอพี : ").concat(m),time:y()(new Date).format("YYYY-MM-DD HH:mm:ss")},e.$store.dispatch("api/log/addLogs",h);case 22:case"end":return t.stop()}}),t,null,[[7,18]])})))()}}},x=(n(821),n(64)),component=Object(x.a)(w,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}}},[t("ModalComplete",{attrs:{open:e.modal.complete.open,message:e.modal.complete.message,complete:e.modal.complete.open},on:{"update:complete":function(t){return e.$set(e.modal.complete,"open",t)}}}),e._v(" "),t("ModalError",{attrs:{open:e.modal.error.open,message:e.modal.error.message,error:e.modal.error.open},on:{"update:error":function(t){return e.$set(e.modal.error,"open",t)}}}),e._v(" "),t("ModalWarning",{attrs:{open:e.modal.warning.open,message:e.modal.warning.message,warning:e.modal.warning.open},on:{"update:warning":function(t){return e.$set(e.modal.warning,"open",t)}}}),e._v(" "),t(d.a,{staticClass:"d-flex align-center justify-center",attrs:{fluid:"","fill-height":""}},[t(m.a,{attrs:{align:"center",justify:"center"}},[t(l.a,{attrs:{cols:"12",sm:"8",md:"6"}},[t(r.a,[t(c.d,{staticStyle:{"justify-content":"center",display:"flex"}},[t("span",{staticClass:"headline"},[e._v("ยินดีต้อนรับ")])]),e._v(" "),t(c.b,{staticStyle:{"justify-content":"center",display:"flex"}},[e._v("เข้าสู่ระบบด้วยผู้ใช้งานของคุณ")]),e._v(" "),t(c.c,[t(f.a,{staticClass:"small-text-field",attrs:{label:"อีเมล","prepend-icon":"mdi-email",type:"email",outlined:"",dense:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),t(f.a,{staticClass:"small-text-field",attrs:{"prepend-icon":"mdi-lock",label:"รหัสผ่าน","append-icon":e.show1?"mdi-eye":"mdi-eye-off",type:e.show1?"text":"password",outlined:"",dense:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),t(o.a,{attrs:{disabled:!e.form.email||!e.form.password,color:"#24b224",block:""},on:{click:e.login}},[e._v("\n              เข้าสู่ระบบ\n            ")]),e._v(" "),t("a",{staticClass:"forgot-password-text",on:{click:e.forgotPassword}},[e._v("\n              ลืมรหัสผ่าน?\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"9e0507a6",null);t.default=component.exports;installComponents(component,{ModalComplete:n(670).default,ModalError:n(677).default,ModalWarning:n(676).default})}}]);