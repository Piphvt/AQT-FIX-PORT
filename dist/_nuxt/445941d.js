(window.webpackJsonp=window.webpackJsonp||[]).push([[58,21,22,23],{670:function(e,t,n){"use strict";n.r(t);var r=n(638),o=n(230),l=n(101),c=n(651),d=n(639),m=n(225),f={props:{method:{type:Function,default:null},open:{required:!0},message:{type:String}},watch:{open:function(e){e?document.addEventListener("keydown",this.handleKeydown):document.removeEventListener("keydown",this.handleKeydown)}},data:function(){return{}},methods:{confirm:function(){null===this.method||this.method(),this.$emit("update:complete",!1)},handleKeydown:function(e){"Escape"===e.key&&this.confirm()}}},h=n(64),component=Object(h.a)(f,(function(){var e=this,t=e._self._c;return t(c.a,{attrs:{persistent:"","retain-focus":!1,"max-width":"300","max-height":"300","content-class":"rounded-xl"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.confirm.apply(null,arguments)}},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(o.a,[t(l.d,{staticClass:"d-flex align-center justify-center text-h6"},[t(m.a,{staticClass:"mr-3",attrs:{color:"#24b224",size:"40"}},[e._v("mdi-check-circle")]),e._v("\n      สำเร็จ\n    ")],1),e._v(" "),t(d.a,{staticClass:"mb-3"}),e._v(" "),t(l.c,{staticClass:"text-center"},[e._v("\n      "+e._s(e.message)+"\n    ")]),e._v(" "),t(l.a,{staticClass:"justify-center"},[t(r.a,{staticClass:"rounded-xl font-weight-medium mt-0",attrs:{color:"#24b224"},on:{click:e.confirm}},[e._v("\n        ตกลง\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},672:function(e,t,n){"use strict";n.r(t);var r=n(638),o=n(230),l=n(101),c=n(651),d=n(639),m=n(225),f={props:{method:{type:Function},open:{required:!0}},watch:{open:function(e){e?document.addEventListener("keydown",this.handleKeydown):document.removeEventListener("keydown",this.handleKeydown)}},methods:{confirm:function(){this.method(),this.$emit("update:confirm",!1)},cancel:function(){this.$emit("update:confirm",!1)},handleKeydown:function(e){"Escape"===e.key?this.cancel():"Enter"===e.key&&this.confirm()}}},h=n(64),component=Object(h.a)(f,(function(){var e=this,t=e._self._c;return t(c.a,{attrs:{persistent:"","retain-focus":!1,"max-width":"300","max-height":"300","content-class":"rounded-xl"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirm.apply(null,arguments)}]},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(o.a,[t(l.d,{staticClass:"d-flex align-center justify-center text-h6"},[t(m.a,{staticClass:"mr-3",attrs:{justify:"center",size:"40",color:"#24b224"}},[e._v("mdi-help")]),e._v("\n      ต้องการทำรายการหรือไม่\n    ")],1),e._v(" "),t(d.a,{staticClass:"mb-3"}),e._v(" "),t(l.a,{staticClass:"justify-center"},[t(r.a,{staticClass:"rounded-xl font-weight-medium mt-0",attrs:{color:"#24b224"},on:{click:e.confirm}},[e._v("\n        ตกลง\n      ")]),e._v(" "),t(r.a,{staticClass:"rounded-xl font-weight-medium mt-0",attrs:{color:"#e50211"},on:{click:e.cancel}},[e._v("\n        ยกเลิก\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},677:function(e,t,n){"use strict";n.r(t);var r=n(638),o=n(230),l=n(101),c=n(651),d=n(639),m=n(225),f={props:{method:{type:Function,default:null},open:{required:!0},message:{type:String}},watch:{open:function(e){e?document.addEventListener("keydown",this.handleKeydown):document.removeEventListener("keydown",this.handleKeydown)}},data:function(){return{}},methods:{confirm:function(){null===this.method||this.method(),this.$emit("update:error",!1)},handleKeydown:function(e){"Escape"===e.key&&this.confirm()}}},h=n(64),component=Object(h.a)(f,(function(){var e=this,t=e._self._c;return t(c.a,{attrs:{persistent:"","retain-focus":!1,"max-width":"300","max-height":"300","content-class":"rounded-xl"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.confirm.apply(null,arguments)}},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(o.a,[t(l.d,{staticClass:"d-flex align-center justify-center text-h6"},[t(m.a,{staticClass:"mr-3",attrs:{size:"40",color:"#e50211"}},[e._v("mdi-alert")]),e._v("\n      เกิดข้อผิดพลาด\n    ")],1),e._v(" "),t(d.a,{staticClass:"mb-3"}),e._v(" "),t(l.c,{staticClass:"text-center"},[e._v("\n      "+e._s(e.message)+"\n    ")]),e._v(" "),t(l.a,{staticClass:"justify-center"},[t(r.a,{staticClass:"rounded-xl font-weight-medium mt-0",attrs:{color:"#24b224"},on:{click:e.confirm}},[e._v("\n        ตกลง\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},774:function(e,t,n){var content=n(838);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(22).default)("5987ac70",content,!0,{sourceMap:!1})},837:function(e,t,n){"use strict";n(774)},838:function(e,t,n){var r=n(21)((function(i){return i[1]}));r.push([e.i,".register-container[data-v-158f3a16]{align-items:center;display:flex;height:80vh;justify-content:center}.v-card[data-v-158f3a16]{margin:auto;max-height:800px;max-width:600px}.last-text-field[data-v-158f3a16]{margin-bottom:2px}",""]),r.locals={},e.exports=r},926:function(e,t,n){"use strict";n.r(t);var r=n(638),o=n(230),l=n(101),c=n(682),d=n(652),m=n(696),f=n(225),h=n(142),v=n(18),y=n(119),k=n(681),x=n(704),w=n(703),_=n(2),C=(n(6),n(31),n(43),n(34),n(1)),$=n.n(C);$.a.locale("th");var j={layout:"default",mounted:function(){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkRank();case 2:case"end":return t.stop()}}),t)})))()},data:function(){var e=this;return{show1:!1,show2:!1,valid:!1,form:{email:null,password:null,confirmPassword:null,fname:null,lname:null,phone:null,gender:null,picture:"unknown.jpg",status:2,ranks_id:2,created_date:$()(new Date).format("YYYY-MM-DD HH:mm:ss"),updated_date:$()(new Date).format("YYYY-MM-DD HH:mm:ss")},modal:{confirm:{open:!1},complete:{open:!1,message:"การลงทะเบียนสมาชิกเสร็จสมบูรณ์ กรุณารอการอนุมัติผู้ใช้งาน"},error:{open:!1,message:"มีบางอย่างผิดปกติ"}},rules:{required:function(e){return!!e||"กรุณากรอกข้อมูล"},email:function(e){return/.+@.+\..+/.test(e)||"กรุณากรอกอีเมลให้ถูกต้อง"},minPassword:function(e){return e&&e.length>=8||"รหัสผ่านต้องมีอย่างน้อย 8 ตัวอักษร!"},passwordMatch:function(t){return t===e.form.password||"รหัสผ่านต้องเหมือนกัน"},phoneNumber:function(e){return/^0[0-9]{9}$/.test(e)||"กรุณากรอกเบอร์โทรศัพท์ให้ถูกต้อง"},thaiOnly:function(e){return/^[ก-๙]+$/.test(e)||"กรุณาใช้ชื่อเป็นภาษาไทย"}},genderOptions:[{text:"ชาย",value:"ชาย",icon:"mdi-face-man"},{text:"หญิง",value:"หญิง",icon:"mdi-face-woman"},{text:"ไม่ระบุ",value:"ไม่ระบุ",icon:"mdi-not-equal-variant"}]}},methods:{checkRank:function(){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$auth.loggedIn){t.next=12;break}if(n=e.$auth.user.status.toString(),r=e.$auth.user.ranks_id.toString(),"2"!==n){t.next=9;break}return e.$router.push("/"),t.next=7,e.$auth.logout();case 7:t.next=10;break;case 9:"1"===r||"2"===r||"3"===r?e.$router.push("/auth"):e.$router.push("/");case 10:t.next=13;break;case 12:e.$router.push("/auth/register");case 13:case"end":return t.stop()}}),t)})))()},confirm:function(){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.form.validate())try{e.modal.confirm.open=!0}catch(t){e.modal.error.open=!0}else e.modal.error.open=!0,e.modal.error.message="กรุณากรอกข้อมูลให้ครบถ้วน";case 1:case"end":return t.stop()}}),t)})))()},create:function(){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("api/employee/register",e.form);case 3:t.sent,e.modal.complete.open=!0,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),e.modal.error.open=!0,e.modal.error.message="มีอีเมลนี้อยู่แล้ว";case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},goBack:function(){this.$router.push("/auth")},resetForm:function(){this.form.email=null,this.form.password=null,this.form.confirmPassword=null,this.form.fname=null,this.form.lname=null,this.form.phone=null,this.form.gender=null,this.$refs.form.resetValidation()},selectGender:function(e){var t=this;this.form.gender=e,this.form.picture="หญิง"===e?"woman.png":"ชาย"===e?"man.png":"unknown.jpg",this.$nextTick((function(){t.$refs.genderSelect.blur()}))}}},E=(n(837),n(64)),component=Object(E.a)(j,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"register-container",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register.apply(null,arguments)}}},[t("ModalComplete",{attrs:{open:e.modal.complete.open,message:e.modal.complete.message,complete:e.modal.complete.open,method:e.goBack},on:{"update:complete":function(t){return e.$set(e.modal.complete,"open",t)}}}),e._v(" "),t("ModalError",{attrs:{open:e.modal.error.open,message:e.modal.error.message,error:e.modal.error.open},on:{"update:error":function(t){return e.$set(e.modal.error,"open",t)}}}),e._v(" "),t("ModalConfirm",{attrs:{open:e.modal.confirm.open,confirm:e.modal.confirm.open,method:e.create},on:{"update:confirm":function(t){return e.$set(e.modal.confirm,"open",t)}}}),e._v(" "),t(d.a,{staticClass:"d-flex align-center justify-center",attrs:{fluid:"","fill-height":""}},[t(k.a,{attrs:{align:"center",justify:"center"}},[t(c.a,{attrs:{cols:"12",sm:"8",md:"6"}},[t(o.a,[t(l.d,{staticStyle:{"justify-content":"center",display:"flex"}},[t("span",{staticClass:"headline"},[e._v("สร้างผู้ใช้งาน")])]),e._v(" "),t(l.b,{staticClass:"pa-0",staticStyle:{"justify-content":"center",display:"flex"}},[e._v("กรอกข้อมูลให้ครบถ้วน")]),e._v(" "),t(m.a,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(l.c,{staticClass:"pa-8"},[t(k.a,{staticClass:"pa-0"},[t(c.a,{staticClass:"pa-1",attrs:{cols:"12"}},[t(w.a,{staticClass:"small-text-field",attrs:{label:"อีเมล","prepend-icon":"mdi-email",type:"email",outlined:"",dense:"",rules:[e.rules.required,e.rules.email]},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),t(k.a,{staticClass:"pa-0"},[t(c.a,{staticClass:"pa-1",attrs:{cols:"12",sm:"6"}},[t(w.a,{staticClass:"small-text-field",attrs:{"prepend-icon":"mdi-lock",label:"รหัสผ่าน","append-icon":e.show1?"mdi-eye":"mdi-eye-off",type:e.show1?"text":"password",outlined:"",dense:"",rules:[e.rules.required,e.rules.minPassword]},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),t(c.a,{staticClass:"pa-1",attrs:{cols:"12",sm:"6"}},[t(w.a,{staticClass:"small-text-field",attrs:{"prepend-icon":"mdi-lock-check",label:"ยืนยันรหัสผ่าน","append-icon":e.show2?"mdi-eye":"mdi-eye-off",type:e.show2?"text":"password",outlined:"",dense:"",rules:[e.rules.required,e.rules.passwordMatch]},on:{"click:append":function(t){e.show2=!e.show2}},model:{value:e.form.confirmPassword,callback:function(t){e.$set(e.form,"confirmPassword",t)},expression:"form.confirmPassword"}})],1)],1),e._v(" "),t(k.a,{staticClass:"pa-0"},[t(c.a,{staticClass:"pa-1",attrs:{cols:"12",sm:"6"}},[t(w.a,{staticClass:"small-text-field",attrs:{label:"ชื่อเล่น","prepend-icon":"mdi-pen",outlined:"",dense:"",rules:[e.rules.required,e.rules.thaiOnly]},model:{value:e.form.fname,callback:function(t){e.$set(e.form,"fname",t)},expression:"form.fname"}})],1),e._v(" "),t(c.a,{staticClass:"pa-1",attrs:{cols:"12",sm:"6"}},[t(w.a,{staticClass:"small-text-field",attrs:{label:"ชื่อจริง","prepend-icon":"mdi-home-group",outlined:"",dense:"",rules:[e.rules.required,e.rules.thaiOnly]},model:{value:e.form.lname,callback:function(t){e.$set(e.form,"lname",t)},expression:"form.lname"}})],1)],1),e._v(" "),t(k.a,{staticClass:"pa-0"},[t(c.a,{staticClass:"pa-1",attrs:{cols:"12",sm:"6"}},[t(w.a,{staticClass:"small-text-field",attrs:{label:"เบอร์โทรศัพท์","prepend-icon":"mdi-phone",outlined:"",dense:"",rules:[e.rules.required,e.rules.phoneNumber]},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),t(c.a,{staticClass:"pa-1",attrs:{cols:"12",sm:"6"}},[t(x.a,{ref:"genderSelect",staticClass:"last-text-field",attrs:{items:e.genderOptions,label:"เพศ","prepend-icon":"mdi-gender-male-female",outlined:"",dense:"",rules:[e.rules.required]},scopedSlots:e._u([{key:"item",fn:function(data){return[t(h.a,{attrs:{value:data.item.value},on:{click:function(t){return e.selectGender(data.item.value)}}},[t(y.a,[t(f.a,[e._v(e._s(data.item.icon))])],1),e._v(" "),t(v.a,[t(v.c,[e._v(e._s(data.item.text))])],1)],1)]}}]),model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}})],1)],1),e._v(" "),t(k.a,{staticClass:"pa-0",attrs:{align:"center",justify:"center"}},[t(c.a,{staticClass:"pa-1 last-text-field",attrs:{cols:"6"}},[t(r.a,{attrs:{disabled:!e.valid,color:"#24b224",block:""},on:{click:e.confirm}},[e._v("\n                                        ลงทะเบียน\n                                    ")])],1),e._v(" "),t(c.a,{staticClass:"pa-1 last-text-field",attrs:{cols:"6"}},[t(r.a,{attrs:{color:"#e50211",block:""},on:{click:e.goBack}},[e._v("\n                                        ยกเลิก\n                                    ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"158f3a16",null);t.default=component.exports;installComponents(component,{ModalComplete:n(670).default,ModalError:n(677).default,ModalConfirm:n(672).default})}}]);